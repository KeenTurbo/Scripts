/***********************************************
> 应用名称：墨鱼自用小红书去广告脚本
> 脚本作者：@ddgksf2013
> 微信账号：墨鱼手记
> 更新时间：2025-01-13
> 通知频道：https://t.me/ddgksf2021
> 贡献投稿：https://t.me/ddgksf2013_bot
> 问题反馈：ddgksf2013@163.com
> 特别提醒：如需转载请注明出处，谢谢合作！
***********************************************/




const version = 'V1.0.19';
const $ = new Env("小红书");
var _0xodz='jsjiami.com.v7';const _0x118291=_0x313a;function _0x313a(_0x2e1e89,_0xda779){const _0x3388fc=_0x3388();return _0x313a=function(_0x313a31,_0x18d27a){_0x313a31=_0x313a31-0x139;let _0x40afc2=_0x3388fc[_0x313a31];if(_0x313a['vuqJXm']===undefined){var _0x12fb37=function(_0x5763f5){const _0x50fe2b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x15f271='',_0x12d356='';for(let _0x33fc6d=0x0,_0x5c91c4,_0x3af08b,_0x56bd12=0x0;_0x3af08b=_0x5763f5['charAt'](_0x56bd12++);~_0x3af08b&&(_0x5c91c4=_0x33fc6d%0x4?_0x5c91c4*0x40+_0x3af08b:_0x3af08b,_0x33fc6d++%0x4)?_0x15f271+=String['fromCharCode'](0xff&_0x5c91c4>>(-0x2*_0x33fc6d&0x6)):0x0){_0x3af08b=_0x50fe2b['indexOf'](_0x3af08b);}for(let _0x1af3a9=0x0,_0x28048e=_0x15f271['length'];_0x1af3a9<_0x28048e;_0x1af3a9++){_0x12d356+='%'+('00'+_0x15f271['charCodeAt'](_0x1af3a9)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x12d356);};const _0x1bc4ca=function(_0x559f77,_0x360b56){let _0x2c7869=[],_0x2dce80=0x0,_0x422544,_0xaf7652='';_0x559f77=_0x12fb37(_0x559f77);let _0x247de4;for(_0x247de4=0x0;_0x247de4<0x100;_0x247de4++){_0x2c7869[_0x247de4]=_0x247de4;}for(_0x247de4=0x0;_0x247de4<0x100;_0x247de4++){_0x2dce80=(_0x2dce80+_0x2c7869[_0x247de4]+_0x360b56['charCodeAt'](_0x247de4%_0x360b56['length']))%0x100,_0x422544=_0x2c7869[_0x247de4],_0x2c7869[_0x247de4]=_0x2c7869[_0x2dce80],_0x2c7869[_0x2dce80]=_0x422544;}_0x247de4=0x0,_0x2dce80=0x0;for(let _0x567d3d=0x0;_0x567d3d<_0x559f77['length'];_0x567d3d++){_0x247de4=(_0x247de4+0x1)%0x100,_0x2dce80=(_0x2dce80+_0x2c7869[_0x247de4])%0x100,_0x422544=_0x2c7869[_0x247de4],_0x2c7869[_0x247de4]=_0x2c7869[_0x2dce80],_0x2c7869[_0x2dce80]=_0x422544,_0xaf7652+=String['fromCharCode'](_0x559f77['charCodeAt'](_0x567d3d)^_0x2c7869[(_0x2c7869[_0x247de4]+_0x2c7869[_0x2dce80])%0x100]);}return _0xaf7652;};_0x313a['HcqGpY']=_0x1bc4ca,_0x2e1e89=arguments,_0x313a['vuqJXm']=!![];}const _0x989649=_0x3388fc[0x0],_0x4a1a7d=_0x313a31+_0x989649,_0x3b0c90=_0x2e1e89[_0x4a1a7d];return!_0x3b0c90?(_0x313a['ATZtXg']===undefined&&(_0x313a['ATZtXg']=!![]),_0x40afc2=_0x313a['HcqGpY'](_0x40afc2,_0x18d27a),_0x2e1e89[_0x4a1a7d]=_0x40afc2):_0x40afc2=_0x3b0c90,_0x40afc2;},_0x313a(_0x2e1e89,_0xda779);}(function(_0x2d89dc,_0x70e087,_0x3f1524,_0xcdb9bc,_0x41461b,_0x136363,_0x29d875){return _0x2d89dc=_0x2d89dc>>0x6,_0x136363='hs',_0x29d875='hs',function(_0x528795,_0x1a25d7,_0x2371f0,_0x1c2214,_0x3f75c8){const _0x1c3fdc=_0x313a;_0x1c2214='tfi',_0x136363=_0x1c2214+_0x136363,_0x3f75c8='up',_0x29d875+=_0x3f75c8,_0x136363=_0x2371f0(_0x136363),_0x29d875=_0x2371f0(_0x29d875),_0x2371f0=0x0;const _0x11bb14=_0x528795();while(!![]&&--_0xcdb9bc+_0x1a25d7){try{_0x1c2214=parseInt(_0x1c3fdc(0x173,'g$qF'))/0x1*(-parseInt(_0x1c3fdc(0x170,'ieQU'))/0x2)+-parseInt(_0x1c3fdc(0x1af,'u&(p'))/0x3*(-parseInt(_0x1c3fdc(0x14e,'g$qF'))/0x4)+-parseInt(_0x1c3fdc(0x169,'^%4c'))/0x5+parseInt(_0x1c3fdc(0x19a,'F3xw'))/0x6*(-parseInt(_0x1c3fdc(0x16b,'4jZ%'))/0x7)+parseInt(_0x1c3fdc(0x1e4,'qBx@'))/0x8+parseInt(_0x1c3fdc(0x177,'4jZ%'))/0x9+parseInt(_0x1c3fdc(0x1f8,'VvrE'))/0xa;}catch(_0x5b7f4c){_0x1c2214=_0x2371f0;}finally{_0x3f75c8=_0x11bb14[_0x136363]();if(_0x2d89dc<=_0xcdb9bc)_0x2371f0?_0x41461b?_0x1c2214=_0x3f75c8:_0x41461b=_0x3f75c8:_0x2371f0=_0x3f75c8;else{if(_0x2371f0==_0x41461b['replace'](/[kNGHSJXgtYpqxlrRfFewLQAb=]/g,'')){if(_0x1c2214===_0x1a25d7){_0x11bb14['un'+_0x136363](_0x3f75c8);break;}_0x11bb14[_0x29d875](_0x3f75c8);}}}}}(_0x3f1524,_0x70e087,function(_0x7b360e,_0x17953e,_0x4dde3e,_0x1fddfc,_0x39d46a,_0x7190da,_0x2dcf23){return _0x17953e='\x73\x70\x6c\x69\x74',_0x7b360e=arguments[0x0],_0x7b360e=_0x7b360e[_0x17953e](''),_0x4dde3e='\x72\x65\x76\x65\x72\x73\x65',_0x7b360e=_0x7b360e[_0x4dde3e]('\x76'),_0x1fddfc='\x6a\x6f\x69\x6e',(0x19419b,_0x7b360e[_0x1fddfc](''));});}(0x3280,0x25593,_0x3388,0xcc),_0x3388)&&(_0xodz=_0x118291(0x1bc,'098@'));$[_0x118291(0x1a8,'u&(p')]=_0x118291(0x174,'jOU6'),$['RedBookVideoKey']='redbook_user_video_key';function _0x3388(){const _0x38e085=(function(){return[_0xodz,'kjGlsRbHjNiSqaYtmQArixf.wcLXoFXmpxJ.gev7==','WQ4RWOxdUG','W7pdGmkfW4u','B0RcVmkaWPRcG1JdSGBdPa','W49jWQetvKpcIq','ECkNW6C','q8k9W4O1WPRdN8o2W6hcQ8kFbLWGW5uQWQNcLG','FmkPANW','D3ZcQ3KZWQ49hCkoccz1qG','W6pdHmkcW5a','rCk3W7q1aCo1WRLXzeNcPCktja','WQOwWQC','WQjWW4dcOWNcG8kt','FZ0/W6aeW7BcLKxcJwPhWQvdWPVcUq','W4z+W4fAuSofFSkrECoz','W7lcIMpcVa','WQXCW6Dg','B8kZAw0Dc8omo0W','W6xcG3BcR8khmSkNaYlcJG','ASkPD3C2dSoko3JcO8oiWPeSveZdLW','W7GQlG','WQFcLmouWPZdK8o7W4RcOJRdQsu','W67cO8ob','nt0+pG','W4SRCCkKW4TIBYhcQZm','x8k5W7tcTCoWWOpcUvqfEq','ssf7yY8VFNVcKW','a8oQWRjZ','WQhcImodWPe','i8o0W6fqWQS','xCk8W7pcJ8oWWP7cPeGqEq','scb8g8ogWRajW7qt','rCk/W7u1bmoYW6rQEu3cVSkR','W45UW7ZcGW','W6JcPCoFkK4wlCosWRG','5Pg157Ec562v6k+A','t8otqLG','W6FdSCkNiSog','W7xdTSo0','W5JcMe7dGmodW6X3msm','W6aGoJ4','sYvTzd8','WPu2WRhcU8kGW4xcLq','WRbWW5FcQG/dKSow','bepcKSk6pa','of5EWOHGwCocbW','qtC8','W4DQW6ZcI2K','W7pdRmo5W79wWODYjKPC','W7tdJmkfW7TwrCkOW64f','W5tcL8o/va','wIbS','W44QDmkZW4fIyIdcUJldU8oBywS','defh','W5fLW5DgsSo1A8kCs8ojWPm0','BxRcQa','FLhdGmouW4C','WPFdMtz6WPirwmkWWQK','orNdUmoy','W6PtyXJdLYFdVSkmya','W4pcISo3','W5PsWQeZvK0','W6e3jq','qd02W4C0W6NcNhdcJ29fWQ8','DLaLiYveW57dOGq','W4xcNCo6x03cObDCW7ddKdnKwmk2','W7rlW7y3WP3cTZldU8kLW6dcPSkeAq'].concat((function(){return['t8kSW7lcUCo5WOVcOLSz','W60iWQqkW4ldTd5Uh8kWihG','WOGNW6ek','ee9seSoT','otuKk8kbbtyYWO0J','oX3dQCoDWPdcLG','orDAW4FcQ0aRWQtcSLKPW6G','xIWPW4SfW77cLhxcNq','nSo0W4lcO8oPhJmqlmklof/dVImuDCkV','W5JdUHhdGmoKW4jB','g8kfjqHaj8keWPldS8o+xq/cS8kqW6iJEIreFCkfW5W','nmoVWPXiAhJcPSkeW58','DgFcOW','W6eiWQ0dW4hdUGLuhmkHp1O','fHxcQZhcVrNdL8oTWOpdMq','WP4JW6ueWP8C','lSo0W4pcJ8o+','lmoQW5qo','WRxdJmkn','W6ddOCkvoSo8jmkWW41YewfqtCkOW7hcGCo8','W47cTmooW5lcMJrlW6mnWPTD','z1hdL8oj','d8kjlr5koG','e8oUWRvM','W4DQW6ZcI2LOWRRdSXz9W6JcMSoLWO0KW7mL','crlcRq','WO7dMcOw','CfhcHKWS','o0npWPv7tmooeMq','WQ52W57cQGBcJCktyCoCkMe9pa','fvXm','hmkslq','BfCikY9q','WQZdKCkg','W4b4W4W','qZKVW4SDW7ZcOMxcI2DbWQ8','W7VcJNpcTmkd','nWVdPSoqW4VdMWhdRfpcUHiAgmot','pfjoWOG','crtcVcBcHZBdLSoSWPhdMCovra','W6ZdOCksba','F1VdHCozW4/cSCo/WODQW7m/','W5XMW6ZcH2DrWQZdTWqIWPC','WQRdL8kysrXekupcUW','o8kNWQuw','WPNdNH/dRCozW5m','gSoQWQvUvCkFW7PQFKlcQ8kQp8oBWRmRkG','vJfQg8oj','urz4jmoIW7Pgyq','WRypWQ9GW5/dQLJdNSkcW5RcLCkjwSkoW5y','fXJcPIlcRcpdMSoCWOldMCkaahfmjCkpW6q','W5ySzmkZW7frBZZcUq','ocGVmSkT','W6OMDmkuW4fsBrNcPdJdSSoBs2Po','W7FcUmoBjN8blmoBWRuf','W5riwHxdNa','WR3dGSkEqq','arZcVIi','xZv6e8oB','W4yGlqGaWO8VW7RdNSk/W50dWQvUfq','qrpdKmoXANugh3qSpMa','dCkbnqS','W4xdHmkvW6zorCkXW5OEW5nLqmkitHi','uLipicu','sJ0VW4ykW63cNa','W5LhWQeLuG','WRvTW4hcPG7cJ8kFy8kl','W6tdLCkdW41ptCkZW6Wp'].concat((function(){return['lCoSWRpcLM9MWP/cQMpcJq','WQBcKmofWPWqBmkQW5G+W4T5','W7CKps8iWO82W4pdK8kJWPnm','sCkQW6W','W7aKpsS','b8kpnq9WiCkl','WRylWRfOW4ldPw7dM8ku','Amk9Bxu','bCoQWQ1MqmkLW61uB0JcM8kTi8oQWRS3ia','F8kLAMaNcSo6jKlcTmoqWOW9wbpcHa','AeGEWOZdHb4VWQVcQa','WRfWW5FcQaxcNmkfp8os','WPBdOCo3W7dcLszSW64','CxtcVw85','W43cQSofW5ZcNIP9WQehWODel8kJDq','W67dR8kuimoViSk0','WQKwWRvKW7pdSM/dKSkzW5VcRmkgvmoyWPmkq2i','tt1Qf8ohWOGjW7y','nrNdV8oMW5JdKWtcO0tcSbTRcCklASkzBa','W5yIzmk/W5HywtNcOJxdTmor','iunyWPfM','W7BdKCkbW7TvqSk/W6Ct','WPK0W7K','l8o6WP1+DhRcO8kdW5lcR8klW67cPCk/sCowW6q','mmofW7lcImoH','W6ddR8klamoOjmk5W4GOb21GwG','xSkyWQ3cT8odshvFEW','WOiPW6eoWRiejGlcNG','frZcUddcVq','WQVdHSkgqqzgjhRcPqedjYOHWQuchq','AhJcRNS5WOilh8kbfa0','WPRdIWZdQSoj','oXhdOmonW4/dHa','j0vuWPT8rCo4aw9P','amkujaDC','l8kUdILw','xtKPW5eo','xZv6eW','rmkQW4O','WQTnW6zBWP/cQG5leG','pCk7DNSMfmo6nKBcTmocWROOdW','W4DQW6xcH1DhWQJdSqT5W5dcNa','W7ZcTmodjLiqmmorWP4dnsddHfK','W5HQW6tcG3XsWQ3dJqD3W5JcNCo5WRWSW68V','BmkNWOhdHCkRtM9bBSoF','zmk9AKSWaSojnfpcO8ocWRO5uKBdGc0','WOFdGIL+WPKyrCoSW7a','W7DBCqS','W7zmBG','WOZdLd0hvrPZBa','WRuEWRfYW4K','Bu4CWOBdRZCOWRhcPKeSW751sCo1CmkiW6BdJ8oKcrNdKSkckCkOWPO0qmkb5Pgs57sy56Y+6k23Dru','CmkXW7ddHqeJW4lcG1/cTSoFaSks','AxtcVemUWPq4eSkCaH1CfZNdUmk8cG','DCkQW5SupIVdV8kfW6VcMSkGW7/cTW','qCk5W5qNWOS','W4rdWRC/vN/cKSkdWQ7cMYO9Duz0qCkT','W77cGNdcTCkobmkPbtdcVSoNemkB','WPSEW6zKaHxdKCkyWRtcKcqeBG','EqyjW4qKBCoxjLvYqq','W5WIzmk3','W7nFCaZdLW','WOZdGXldVmoZW4Lv','v8ozvG','Fmk9A2CN'];}()));}()));}());_0x3388=function(){return _0x38e085;};return _0x3388();};let body=$response[_0x118291(0x159,'l9Jw')];if(body){switch(!![]){case/api\/sns\/v\d\/note\/widgets/[_0x118291(0x14b,'(2k5')]($request['url']):try{let obj=JSON[_0x118291(0x150,'Ic@@')](body);const propertiesToDelete=[_0x118291(0x1d6,'s9Ib'),'note_next_step'];for(const prop of propertiesToDelete){obj[_0x118291(0x17b,'VZp&')]?.[prop]&&delete obj[_0x118291(0x1d3,'n$a3')][prop];}body=JSON['stringify'](obj);}catch(_0x40fbfb){console['log'](_0x118291(0x1b9,'sj4V')+_0x40fbfb);}break;case/api\/sns\/v\d\/note\/live_photo\/save/[_0x118291(0x14f,'fi$%')]($request[_0x118291(0x188,'F3xw')]):try{let obj=JSON['parse'](body);obj[_0x118291(0x181,'VvrE')][_0x118291(0x1a4,'n$a3')]=JSON[_0x118291(0x1ee,'s9Ib')]($[_0x118291(0x1aa,'E[oc')]($[_0x118291(0x1a5,'fi$%')])),body=JSON['stringify'](obj);}catch(_0x1c797f){console[_0x118291(0x13b,'fi$%')](_0x118291(0x191,'HfHd')+_0x1c797f);}break;case/api\/sns\/v\d\/note\/video\/save/[_0x118291(0x190,'y#pk')]($request[_0x118291(0x14d,'CcMk')]):try{let obj=JSON[_0x118291(0x16d,'F3xw')](body);obj[_0x118291(0x1ea,'xLct')]=JSON[_0x118291(0x144,'fM]0')]($['getdata']($[_0x118291(0x1fb,'E[oc')])),body=JSON[_0x118291(0x167,'AySK')](obj);}catch(_0x362bd1){console['log'](_0x118291(0x152,'sj4V')+_0x362bd1);}break;case/api\/sns\/v\d\/note\/comment\/list/[_0x118291(0x142,'VvrE')]($request[_0x118291(0x1f3,'H#Ug')]):try{let obj=JSON['parse'](body);for(let module of obj['data']['comments']){if(module[_0x118291(0x154,'y#pk')])for(let item of module['pictures']){item['meme_package']?.['image_url']&&(item[_0x118291(0x1cf,'y#pk')]=item[_0x118291(0x1d7,'av$X')][_0x118291(0x162,'N9sX')],item[_0x118291(0x189,'jOU6')]=item[_0x118291(0x166,'E[oc')]['image_url']);}}body=JSON[_0x118291(0x175,'qBx@')](obj);}catch(_0x1a5ccb){console['log'](_0x118291(0x160,'Lh@Q')+_0x1a5ccb);}break;case/api\/sns\/v\d\/note\/redtube/[_0x118291(0x1dd,'N9sX')]($request[_0x118291(0x13d,'g7CQ')]):try{let obj=JSON[_0x118291(0x1bb,']^*@')](body);for(let module of obj[_0x118291(0x1b2,'fi$%')][_0x118291(0x1c2,'y#pk')]){module['related_goods_num']&&(module[_0x118291(0x1b6,'VvrE')]=0x0),module[_0x118291(0x172,')zSN')]&&(module[_0x118291(0x1e3,']^*@')]=![]),module[_0x118291(0x182,'av$X')]&&(module['media_save_config']={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]}),module[_0x118291(0x178,'HfHd')]&&(module[_0x118291(0x13f,'xLct')]['function_entries']=[{'type':_0x118291(0x15b,'xLct')},{'type':_0x118291(0x1d8,'g7CQ')},{'type':_0x118291(0x1b8,'ieQU')},{'type':_0x118291(0x18d,'E[oc')},{'type':'video_speed'},{'type':_0x118291(0x1fa,'sj4V')},{'type':_0x118291(0x179,'JlMp')},{'type':'video_feedback'}]);}body=JSON[_0x118291(0x149,'g7CQ')](obj);}catch(_0x6fd66c){console[_0x118291(0x155,'E[oc')](_0x118291(0x141,'Ic@@')+_0x6fd66c);}break;case/api\/sns\/v\d\/note\/videofeed/['test']($request[_0x118291(0x1de,'N9sX')]):try{let obj=JSON[_0x118291(0x1eb,'N9sX')](body);for(let module of obj[_0x118291(0x1ea,'xLct')]){module['related_goods_num']&&(module[_0x118291(0x1cb,'VD*P')]=0x0);module[_0x118291(0x172,')zSN')]&&(module[_0x118291(0x1c0,'CS@T')]=![]);module['media_save_config']&&(module['media_save_config']={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]});module[_0x118291(0x157,'CcMk')]&&(module[_0x118291(0x139,'2Y[N')][_0x118291(0x13a,'s9Ib')]=[{'type':'video_download'},{'type':'generate_image'},{'type':_0x118291(0x1ff,'s9Ib')},{'type':_0x118291(0x1c1,'xLct')},{'type':_0x118291(0x13c,'i8#N')},{'type':'dislike'},{'type':'report'},{'type':'video_feedback'}]);if(module[_0x118291(0x1f6,']^*@')]?.[_0x118291(0x156,'av$X')]?.[_0x118291(0x1ef,'sj4V')]){let idata={};idata[_0x118291(0x197,'g$qF')]='2',idata[_0x118291(0x1b3,'jOU6')]=module['id'],idata[_0x118291(0x15d,'mRcy')]=module['video_info_v2'][_0x118291(0x199,'n$a3')][_0x118291(0x196,'fM]0')][0x0]['master_url'],datas[_0x118291(0x143,'i8#N')](idata);}}$[_0x118291(0x151,'3g%b')](JSON[_0x118291(0x1b4,'^%4c')](datas),$[_0x118291(0x19f,'xLct')]),body=JSON[_0x118291(0x1d5,'4jZ%')](obj);}catch(_0x346db1){console[_0x118291(0x17c,'VD*P')](_0x118291(0x194,'av$X')+_0x346db1);}break;case/api\/sns\/v\d\/note\/feed/['test']($request[_0x118291(0x176,']^*@')]):try{let obj=JSON[_0x118291(0x1d2,'E[oc')](body);for(let module of obj[_0x118291(0x1f0,'u&(p')]){module[_0x118291(0x1b6,'VvrE')]&&(module[_0x118291(0x19c,'HfHd')]=0x0);module[_0x118291(0x17d,'F$C7')]&&(module[_0x118291(0x172,')zSN')]=![]);if(module[_0x118291(0x1c9,'JlMp')])for(let item of module['note_list']){item[_0x118291(0x1e6,'6y#f')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]};}}body=JSON[_0x118291(0x1ac,'sj4V')](obj);}catch(_0x18cb42){console['log'](_0x118291(0x16f,'CS@T')+_0x18cb42);}break;case/api\/sns\/v\d\/note\/imagefeed/['test']($request['url']):try{let obj=JSON['parse'](body),datas=[];for(let module of obj['data']){module[_0x118291(0x1d9,'av$X')]&&(module[_0x118291(0x1f4,'l&!2')]=0x0);module[_0x118291(0x1c5,'qBx@')]&&(module[_0x118291(0x1db,'s9Ib')]=![]);if(module['note_list'])for(let item of module[_0x118291(0x19d,'xLct')]){item[_0x118291(0x198,'VvrE')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]};if(item[_0x118291(0x1cc,']^*@')])for(let it of item[_0x118291(0x17e,'098@')]){if(it[_0x118291(0x1ae,'dh))')]){let idata={};idata[_0x118291(0x1bf,'n$a3')]=it['live_photo'][_0x118291(0x15f,'p]@#')][_0x118291(0x1df,'RIHa')],idata[_0x118291(0x1ec,'g$qF')]=it[_0x118291(0x1be,'^%4c')],idata[_0x118291(0x1c4,'JlMp')]=it[_0x118291(0x1a0,'g7CQ')][_0x118291(0x18e,'2Y[N')][_0x118291(0x164,'6y#f')]['h265'][0x0]['master_url'],datas[_0x118291(0x1f5,'s9Ib')](idata);}}}}$['setdata'](JSON['stringify'](datas),$['RedBookPhotoKey']),body=JSON[_0x118291(0x171,'E[oc')](obj);}catch(_0x3e1b6b){console['log']('imagefeed:\x20'+_0x3e1b6b);}break;case/api\/sns\/v\d\/homefeed\/categories\?/[_0x118291(0x142,'VvrE')]($request[_0x118291(0x1b1,'bMnK')]):try{let obj=JSON[_0x118291(0x153,'ULVN')](body);obj[_0x118291(0x1d3,'n$a3')][_0x118291(0x140,'bMnK')]=obj['data']['categories'][_0x118291(0x1ce,'CS@T')](_0xb8e77b=>!(_0xb8e77b[_0x118291(0x1f9,'^%4c')]==_0x118291(0x1c7,'F$C7')||_0xb8e77b['oid']==_0x118291(0x187,'sj4V'))),body=JSON[_0x118291(0x16a,'bMnK')](obj);}catch(_0x55e129){console['log'](_0x118291(0x1b0,'fi$%')+_0x55e129);}break;case/api\/sns\/v\d\/search\/hint/[_0x118291(0x17f,'p]@#')]($request['url']):try{let obj=JSON[_0x118291(0x1e0,'^%4c')](body);obj[_0x118291(0x192,'F$C7')]?.[_0x118291(0x16e,'kzg]')]&&(obj[_0x118291(0x1fd,'2Y[N')]['hint_words']=[{'title':_0x118291(0x14a,'jOU6'),'type':_0x118291(0x1e1,'ieQU'),'search_word':'搜索笔记'}]),body=JSON[_0x118291(0x1c8,'5Gww')](obj);}catch(_0x471125){console[_0x118291(0x15c,'F3xw')]('hint:\x20'+_0x471125);}break;case/api\/sns\/v\d\/search\/hot_list/[_0x118291(0x1fe,'4jZ%')]($request[_0x118291(0x18c,'mRcy')]):try{let obj=JSON[_0x118291(0x17a,')zSN')](body);obj[_0x118291(0x16c,'JlMp')]={'scene':'','title':'','items':[],'host':'','background_color':{},'word_request_id':''},body=JSON[_0x118291(0x146,'n$a3')](obj);}catch(_0x354362){console[_0x118291(0x15e,']^*@')]('hot_list:\x20'+_0x354362);}break;case/api\/sns\/v\d\/search\/trending/[_0x118291(0x184,'RIHa')]($request[_0x118291(0x18b,'VD*P')]):try{let obj=JSON[_0x118291(0x1ca,'HfHd')](body);obj[_0x118291(0x1a2,'VD*P')]={'title':'','queries':[],'type':'','word_request_id':''},body=JSON[_0x118291(0x195,'VD*P')](obj);}catch(_0x4780c0){console[_0x118291(0x183,'HfHd')]('trending:\x20'+_0x4780c0);}break;case/api\/sns\/v\d\/system_service\/splash_config/['test']($request[_0x118291(0x176,']^*@')]):try{let obj=JSON[_0x118291(0x1ab,'6y#f')](body);obj['data'][_0x118291(0x145,'bMnK')][_0x118291(0x1f2,'6y#f')](_0x66300b=>{const _0x419dfe=_0x118291,_0x367f79={'WvXjn':'2208963661','oqAGH':_0x419dfe(0x1f1,'CS@T'),'DRJeM':_0x419dfe(0x185,']^*@'),'FNOCy':_0x419dfe(0x1c6,')zSN')};_0x66300b['start_time']=_0x367f79[_0x419dfe(0x1a1,'N9sX')],_0x66300b['end_time']=_0x419dfe(0x1da,')zSN'),_0x66300b[_0x419dfe(0x15a,'Ic@@')]&&(_0x367f79['DRJeM']!==_0x367f79[_0x419dfe(0x1d1,'jOU6')]?_0x66300b['ads'][_0x419dfe(0x1bd,'F$C7')](_0x37e964=>{const _0xffb11e=_0x419dfe;_0x37e964[_0xffb11e(0x1fc,'mRcy')]=_0x367f79[_0xffb11e(0x1a9,'AySK')],_0x37e964['end_time']=_0x367f79[_0xffb11e(0x14c,'F$C7')];}):_0x31781c['has_related_goods']=![]);}),body=JSON[_0x118291(0x167,'AySK')](obj);}catch(_0x4ab19c){console['log'](_0x118291(0x19b,'^%4c')+_0x4ab19c);}break;case/api\/sns\/v\d\/homefeed\?/['test']($request[_0x118291(0x1d4,'l&!2')]):try{let obj=JSON['parse'](body);obj[_0x118291(0x13e,'kzg]')]=obj[_0x118291(0x1a3,'HfHd')]['filter'](_0x393319=>!_0x393319[_0x118291(0x18a,'AySK')]),body=JSON[_0x118291(0x1dc,'Lh@Q')](obj);}catch(_0x50fa88){console['log']('homefeed:\x20'+_0x50fa88);}break;case/api\/sns\/v\d+\/search\/notes\?/[_0x118291(0x1f7,'u&(p')]($request[_0x118291(0x165,'fi$%')]):try{let obj=JSON[_0x118291(0x1e5,'l&!2')](body);obj[_0x118291(0x161,'CS@T')][_0x118291(0x19e,'kzg]')]=obj[_0x118291(0x1b5,'s9Ib')][_0x118291(0x1d0,'jOU6')][_0x118291(0x180,'jOU6')](_0x1fc2bf=>!_0x1fc2bf['ads']),body=JSON[_0x118291(0x1ad,'u&(p')](obj);}catch(_0x4f4be8){console[_0x118291(0x1ed,'(2k5')](_0x118291(0x168,'l9Jw')+_0x4f4be8);}break;case/api\/sns\/v\d\/system_service\/config\?/['test']($request[_0x118291(0x163,'l9Jw')]):try{let obj=JSON[_0x118291(0x1cd,'g$qF')](body);const propertiesToDelete=['store','splash',_0x118291(0x193,'p]@#'),_0x118291(0x1c3,'u&(p'),_0x118291(0x158,'u&(p'),_0x118291(0x1e7,'2Y[N')];for(const prop of propertiesToDelete){obj[_0x118291(0x1a7,'jOU6')]?.[prop]&&delete obj[_0x118291(0x148,'av$X')][prop];}body=JSON[_0x118291(0x186,'y#pk')](obj);}catch(_0x21f216){console['log'](_0x118291(0x1b7,'s9Ib')+_0x21f216);}break;default:$done({});break;}$done({'body':body});}else $done({});var version_ = 'jsjiami.com.v7';
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e)} isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = [""]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
